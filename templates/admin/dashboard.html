{% extends 'admin/base.html' %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<h1>Dashboard</h1>

<div class="stats-grid">
    <div class="stat-card">
        <i class="fa-solid fa-users"></i>
        <div class="stat-info">
            <span class="stat-number">{{ stats.total_students }}</span>
            <span class="stat-label">Total Students</span>
        </div>
    </div>
    <div class="stat-card warning">
        <i class="fa-solid fa-clock"></i>
        <div class="stat-info">
            <span class="stat-number">{{ stats.pending_blogs }}</span>
            <span class="stat-label">Pending Blogs</span>
        </div>
    </div>
    <div class="stat-card success">
        <i class="fa-solid fa-newspaper"></i>
        <div class="stat-info">
            <span class="stat-number">{{ stats.total_blogs }}</span>
            <span class="stat-label">Total Blogs</span>
        </div>
    </div>
    <div class="stat-card danger">
        <i class="fa-solid fa-envelope"></i>
        <div class="stat-info">
            <span class="stat-number">{{ stats.unread_contacts }}</span>
            <span class="stat-label">Unread Messages</span>
        </div>
    </div>
    <div class="stat-card">
        <i class="fa-solid fa-calendar"></i>
        <div class="stat-info">
            <span class="stat-number">{{ stats.total_events }}</span>
            <span class="stat-label">Total Events</span>
        </div>
    </div>
    <div class="stat-card">
        <i class="fa-solid fa-chalkboard-teacher"></i>
        <div class="stat-info">
            <span class="stat-number">{{ stats.total_faculty }}</span>
            <span class="stat-label">Faculty Members</span>
        </div>
    </div>
</div>

<div class="dashboard-grid">
    <div class="dashboard-card">
        <h3>Recent Contact Messages</h3>
        {% if recent_contacts %}
        <ul class="recent-list">
            {% for contact in recent_contacts %}
            <li>
                <strong>{{ contact.name }}</strong> - {{ contact.subject }}
                <small>{{ contact.created_at.strftime('%d %b %Y') if contact.created_at else '' }}</small>
            </li>
            {% endfor %}
        </ul>
        <a href="{{ url_for('admin_contacts') }}" class="view-all">View All →</a>
        {% else %}
        <p class="text-muted">No recent messages</p>
        {% endif %}
    </div>
    
    <div class="dashboard-card">
        <h3>Pending Blog Approvals</h3>
        {% if pending_blogs %}
        <ul class="recent-list">
            {% for blog in pending_blogs %}
            <li>
                <strong>{{ blog.title }}</strong>
                <small>by {{ blog.author_name or 'Anonymous' }}</small>
            </li>
            {% endfor %}
        </ul>
        <a href="{{ url_for('admin_blogs') }}?status=pending" class="view-all">Review All →</a>
        {% else %}
        <p class="text-muted">No pending blogs</p>
        {% endif %}
    </div>
</div>
{% endblock %}
